<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <link rel="stylesheet" href="/css/forum.css"/>
</head>
<body>
<div th:fragment="nav">
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Source</span>
        </button>
        <a class="navbar-brand" href="/">Source</a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <form class="navbar-form navbar-left" action="/" method="get">
          <div class="form-group">
            <input type="text" class="form-control" name="search" placeholder="搜索话题">
          </div>
          <button type="submit" class="btn btn-default">搜索</button>
        </form>
        <ul class="nav navbar-nav navbar-right">
          <li th:if="${session.user} != null">
            <a href="/publish">发布新帖</a>
          </li>
          <li th:if="${session.user} != null">
            <a href="/mine/reply">通知&nbsp;<span class="badge" th:text="${session.unreadCount}"></span></a>
          </li>
          <li class="dropdown" th:if="${session.user != null}">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
              <span th:text="${session.user.getName()}"></span>
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li><a href="/mine/myposts">我的</a></li>
              <li><a th:href="@{'/profile/' + ${session.user.id}}">个人主页</a></li>
              <li><a href="/logout">退出登录</a></li>
            </ul>
          </li>
<!--          <li th:if="${session.user == null}">-->
<!--            <img th:href="@{https://github.com/login/oauth/authorize(client_id = '87df8eadcb6e3f32612f', redirect_url= ${#httpServletRequest.getRequestURL() + 'callback'}, scope = 'user', state=1)}"-->
<!--                 class="media-object img-size" src="/images/github.png">-->
<!--          </li>-->
          <li th:if="${session.user == null}">
            <a th:href="@{https://github.com/login/oauth/authorize(client_id = '87df8eadcb6e3f32612f', redirect_url= ${#httpServletRequest.getRequestURL() + 'callback'}, scope = 'user', state=1)}">
              <div style="display: inline-block">
                github登录
              </div>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</div>

</body>
